<!-- Header Mobile -->
<header class="mobile-topbar">
  <button class="hamburger-btn" (click)="toggleMenu()" aria-label="Abrir menu">
    <i class="fa fa-bars"></i>
  </button>

  <div class="mobile-brand">
    <img src="/logo.png" alt="EstéticaZap logo" />
    <span>EstéticaZap</span>
  </div>

  <div class="mobile-actions">
    <button class="notification-btn" aria-label="Ver notificações">
      <i class="fa fa-bell"></i>
      <span class="notification-dot"></span>
    </button>
  </div>
</header>

<!-- Overlay escuro (visível apenas quando menu estiver aberto em mobile) -->
<div class="menu-overlay"
     [class.active]="isMenuOpen"
     (click)="onOverlayClick()"></div>

<!-- Side Menu -->
<aside class="side-menu"
       [class.open]="isMenuOpen"
       (touchstart)="onTouchStart($event)"
       (touchmove)="onTouchMove($event)"
       (touchend)="onTouchEnd()">

  <div class="brand">
    <img src="/logo.png" alt="EstéticaZap logo" />
    <span>EstéticaZap</span>
  </div>

  <nav>
    <ul>
      <li routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
        <a routerLink="/home" (click)="closeMenu()"><i class="fa fa-home"></i> Home</a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/agenda" (click)="closeMenu()"><i class="fa fa-calendar-alt"></i> Agenda</a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/clientes" (click)="closeMenu()"><i class="fa fa-users"></i> Clientes</a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/planos" (click)="closeMenu()"><i class="fa fa-crown"></i> Planos</a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/configuracoes" (click)="closeMenu()"><i class="fa fa-cog"></i> Configurações</a>
      </li>
    </ul>
  </nav>

  <!-- Seção de Perfil do Usuário -->
  <div class="user-profile">
    <div class="user-avatar">
      <!-- Mostra foto do usuário se disponível, senão mostra iniciais -->
      <img *ngIf="userPhotoUrl" [src]="userPhotoUrl" [alt]="userDisplayName" />
      <span *ngIf="!userPhotoUrl" class="avatar-initials">{{ userInitials }}</span>
    </div>
    <div class="user-info">
      <span class="user-name">{{ userDisplayName }}</span>
      <span class="user-email">{{ userEmail }}</span>
    </div>
    <button class="user-menu-btn" aria-label="Menu do usuário" (click)="toggleUserMenu()">
      <i class="fa fa-ellipsis-v"></i>
    </button>

    <!-- Menu dropdown do usuário -->
    <div class="user-dropdown" *ngIf="showUserMenu">
      <button class="dropdown-item" (click)="logout()">
        <i class="fa fa-sign-out-alt"></i>
        Sair
      </button>
    </div>
  </div>
</aside>
