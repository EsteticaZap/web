<app-side-menu></app-side-menu>
<div class="agenda-page">
  <!-- Header -->
  <header class="agenda-header">
    <div class="header-left">
      <h1>Agenda</h1>
      <span class="subtitle">Gerencie seus agendamentos</span>
    </div>
    <div class="header-right">
      <div class="view-dropdown">
        <button class="dropdown-btn">
          Visão Semanal <i class="fa fa-chevron-down"></i>
        </button>
      </div>
      <button class="btn-new-appointment">
        <i class="fa fa-plus"></i> Novo Agendamento
      </button>
    </div>
  </header>

  <!-- Navigation and Legend -->
  <div class="week-nav-container">
    <div class="week-navigation">
      <button class="nav-btn" (click)="previousWeek()">
        <i class="fa fa-chevron-left"></i>
      </button>
      <div class="week-info">
        <span class="week-range">{{ weekDateRange }}</span>
        <span class="week-number">Semana {{ weekNumber }}</span>
      </div>
      <button class="nav-btn" (click)="nextWeek()">
        <i class="fa fa-chevron-right"></i>
      </button>
    </div>
    <div class="legend-bar">
      <div class="legend-item">
        <span class="dot confirmed"></span>
        Confirmado
      </div>
      <div class="legend-item">
        <span class="dot pending"></span>
        Pendente
      </div>
      <div class="legend-item">
        <span class="dot declined"></span>
        Recusado
      </div>
    </div>
  </div>

  <!-- Calendar Grid -->
  <div class="calendar-container">
    <table class="calendar-grid">
      <thead>
        <tr>
          <th class="time-header">Horário</th>
          <th *ngFor="let day of weekDays; let i = index" class="day-header">
            <span class="day-name">{{ day.short }}</span>
            <span class="day-number">{{ getDayDate(i) }}</span>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let time of timeSlots" class="time-row">
          <td class="time-cell">{{ time }}</td>
          <td *ngFor="let day of weekDays; let dayIndex = index" class="day-cell">
            <div 
              *ngFor="let appt of getAppointmentsForSlot(time, dayIndex)" 
              class="appointment-card"
              [ngClass]="getStatusClass(appt.status)">
              <div class="appt-avatar">
                <img [src]="appt.image" [alt]="appt.client" />
              </div>
              <div class="appt-info">
                <div class="appt-client">{{ appt.client }}</div>
                <div class="appt-service">{{ appt.service }}</div>
                <div class="appt-time">{{ appt.startTime }} - {{ appt.endTime }}</div>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
